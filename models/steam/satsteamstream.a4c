REQUIRE "steam/iapwssat.a4c";

MODEL satsteamstream REFINES iapwssat;
	mdot IS_A mass_rate;
	Hdot IS_A energy_rate;
	Hdot = mdot*h;
	rho IS_A mass_density;
	rho * v = 1;
METHODS
METHOD default_self;
	RUN iapwssat::default_self;
	rho := 200 {kg/m^3};
	Hdot := 0.1 {kg/s} * 3000 {kJ/kg};
END default_self;
METHOD specify;
	RUN iapwssat::specify;
	FIX mdot;
END specify;
METHOD values;
	RUN iapwssat::values;
	T := 373.15 {K};
	mdot := 0.1 {kg/s};
END values;
METHOD bound_self;
	RUN iapwssat::bound_self;
	(* mdot.lower_bound := 0 {kg/s}; *)
END bound_self;
METHOD on_load;
	RUN bound_self;
	RUN reset;
	RUN values;
END on_load;
METHOD self_test;
	ASSERT mdot == 0.1 {kg/s};
	ASSERT abs(p - 101.418{kPa}) < 0.0005{kPa};
	ASSERT abs(h - 1547.4616{kJ/kg}) < 0.0005{kJ/kg};
	ASSERT Hdot == h*mdot;
END self_test;
END satsteamstream;
