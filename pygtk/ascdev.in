#!@PYTHON@
# to debug this program using 'gdb', invoke 'ASC_GDB=1 ascdev'.

import os, sys, platform, subprocess
from pathlib import Path

if __name__=='__main__':
	#print("PYTHON = @PYTHON@")
	
	sourceroot=Path("@SOURCE_ROOT@")
	script=Path(sys.argv[0])
	
	SEP = os.pathsep
	if platform.system()=="Windows":
		LD_LIBRARY_PATH="PATH"
	elif platform.system()=="Darwin":
		LD_LIBRARY_PATH="DYLD_LIBRARY_PATH"
	else:
		LD_LIBRARY_PATH="LD_LIBRARY_PATH"

	ev = ['ASCENDLIBRARY','ASCENDSOLVERS','PYTHONPATH',LD_LIBRARY_PATH,'PATH']
	for v in ev:
		if not os.environ.get(v):
			raise RuntimeError("Missing required environment variable '%s'"%(v,))

	#print("\nRunning with...")
	#for v in [LD_LIBRARY_PATH,'ASCENDLIBRARY','ASCENDSOLVERS','PYTHONPATH','PATH']:
	#	print("   %s = %s" % (v,os.environ[v]))
	
	import ascpy
	import loading
	assetspath = sourceroot/"pygtk"/"glade"
	from gtkbrowser import *
	#print("ASSETS PATH = %s" % assetspath)
	B = Browser(assetspath=assetspath)
	B.run()	
