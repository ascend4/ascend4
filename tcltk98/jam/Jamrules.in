#
# Jamrules support file for building Ascend4
# (see http://www.freetype.org/jam/index.html)
#
# This file is part of the Ascend Build System.
#
# Copyright (C) 2004  Jerry D. St.Clair
#
# The Ascend Build System is free software; you can redistribute
# it and/or modify it under the terms of the GNU General Public 
# License as published by the Free Software Foundation; either 
# version 2 of the License, or (at your option) any later version.
#
# This program is distributed in hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the 
# GNU General Public License for more details.
#
# You should have received a copy of the GNU General Public License
# along with the program; if not, write to the Free Software 
# Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139 USA.  
# Check the file named COPYING.
#---------------------------------------------------------------------------
#
# UNDER CONSTRUCTION                               
#
# This is a template Jamrules file which supports building the
# Tcl/Tk version of the Ascend modeling system, as well as a static
# library of Tcl/Tk interface functionality. The Ascend jam build 
# system currently supports building the libraries using the MSVC, 
# Borland, MinGW, and Watcom compilers.
#
# INSTALLATION IS NOT WORKING IN THE CURRENT VERSION.
#
# It is not currently customized by the Ascend configure mechanism,
# although this may be implemented in the future.
#
# Users should copy/rename this file to 'Jamrules', then modify
# the settings manually for their particular system.  Ascend
# cannot be built by jam unless the Jambase file is present.
#
# User-customized Jamrules files should not be placed in version
# control.  Only the Jamrules.in template should be versioned.
#
#---------------------------------------------------------------------------

# root directory for installation
prefix =  c:\\dev ;
INSTALL_ROOT = $(prefix)$(SLASH)Ascend4-0.9.5 ;

# name of the builder of the executable (in double quotes) 
BUILD_CREDIT = "anonymous" ;

# Path to general jam info
JAM_GENERAL_DIR = ..$(SLASH)..$(SLASH)jam ;

# Root dir of Ascend base library sources.
#ASC_BASE_ROOT = ..$(SLASH)..$(SLASH)base$(SLASH)generic ;

# Root dir of Ascend libraries - will be qualified for compiler & build type
#ASC_BASE_LIBDIR = ..$(SLASH)..$(SLASH)base$(SLASH)jam ;

# root directories for Tcl and Tk libraries
TCL_DIR = ..$(SLASH)..$(SLASH)..$(SLASH)Tcl ;
TK_DIR  = $(TCL_DIR) ;

# Set the Tcl/Tk/tkTable import library names here to override the
# default, compiler-specific names.  Comment out to use defaults.
# TCL_LIBRARY = tcl80$(SUFLIB) ;
# TK_LIBRARY  = tk80$(SUFLIB) ;
# TKTABLE_LIB = tkTable$(SUFLIB) ;

if $(NODEBUG)
  { EXE_NAME = ascopt4 ; }
else
  { EXE_NAME = ascend4 ; }

ASC_TCLTK98_LIBROOT = libasc_tcltk98 ;
ASC_TCLTK98_LIB     = $(ASC_TCLTK98_LIBROOT)$(SUFLIB) ;

# Install directories - comment to not install that class of file
INSTALL_BIN_DIR     = $(INSTALL_ROOT)$(SLASH)ascend4$(SLASH)bin ;
INSTALL_DOC_DIR     = $(INSTALL_ROOT)$(SLASH)ascend4$(SLASH)doc ;
INSTALL_MODELS_DIR  = $(INSTALL_ROOT)$(SLASH)ascend4$(SLASH)models ;
INSTALL_ASC_TK_DIR  = $(INSTALL_ROOT)$(SLASH)ascend4$(SLASH)Tk ;
INSTALL_USER_DIR    = $(INSTALL_ROOT)$(SLASH)ascend4$(SLASH)user_models ;
INSTALL_TCL_DIR     = $(INSTALL_ROOT)$(SLASH)Tcl ;

# Locations of pre-built install files
ASC_DOC_DIR    = ;
ASC_MODELS_DIR = ..$(SLASH)..$(SLASH)models ;
ASC_TK_DIR     = ..$(SLASH)TK ;

# Paths to base libraries
ASC_BASE_LIBS_QUAL =
  $(JAM_GENERAL_DIR)$(SLASH)$(ASC_BASE_LIBS_RELPATH)$(ASC_BASE_LIBS) ;

# Paths to FORTRAN libraries
FOR_LIBS =
  $(JAM_GENERAL_DIR)$(SLASH)$(LSODLIB_RELPATH)$(SLASH)$(LSODLIB)
  $(JAM_GENERAL_DIR)$(SLASH)$(MINOSLIB_RELPATH)$(SLASH)$(MINOSLIB)
  $(JAM_GENERAL_DIR)$(SLASH)$(CONOPTLIB_RELPATH)$(SLASH)$(CONOPTLIB)
  $(JAM_GENERAL_DIR)$(SLASH)$(LPAKLIB_RELPATH)$(SLASH)$(LPAKLIB)
  $(JAM_GENERAL_DIR)$(SLASH)$(BLASLIB_RELPATH)$(SLASH)$(BLASLIB)
  $(F77_LIBS)
  ;

#======================================================================
# TCL / TK
#
# Set the location of the Tcl/Tk import libraries and include files.
# The order should be -ltk -ltcl
#
# We also need the TkTable widget which does not come as a
# standard part of the Tcl/Tk distribution.  This library can
# either be loaded statically or dynamically.
#
# If TK_LIBS and TK_HDRS are not properly set, ASCEND cannot build.
#======================================================================
TCL_LIB_DIR     ?= $(TCL_DIR)$(SLASH)lib ;
TK_LIB_DIR      ?= $(TK_DIR)$(SLASH)lib ;
TKTABLE_LIB_DIR ?= $(TCL_DIR)$(SLASH)lib ;

if $(NT)
{
  if $(BCCROOT) || ( $(TOOLSET) = BORLANDC )
  {
    TCL_LIBRARY ?= tcl80_bc$(SUFLIB) ;
    TK_LIBRARY  ?= tk80_bc$(SUFLIB) ;
    TKTABLE_LIB ?= tkTable_bc$(SUFLIB) ;
  }
  else if $(MSVCNT) || ( $(TOOLSET) = VISUALC )
  {
    TCL_LIBRARY ?= tcl80$(SUFLIB) ;
    TK_LIBRARY  ?= tk80$(SUFLIB) ;
    TKTABLE_LIB ?= tkTable$(SUFLIB) ;
  }
  else if $(MINGW) || ( $(TOOLSET) = MINGW )
  {
    TCL_LIBRARY ?= libtcl80$(SUFLIB) ;
    TK_LIBRARY  ?= libtk80$(SUFLIB) ;
    TKTABLE_LIB ?= libtkTable$(SUFLIB) ;
  }
  else if $(WATCOM) || ( $(TOOLSET) = WATCOM )
  {
    TCL_LIBRARY ?= tcl80_wat$(SUFLIB) ;
    TK_LIBRARY  ?= tk80_wat$(SUFLIB) ;
    TKTABLE_LIB ?= tkTable_wat$(SUFLIB) ;
  }
}
else if $(OS) = LINUX
{
    TCL_LIBRARY ?= libtcl80$(SUFLIB) ;
    TK_LIBRARY  ?= libtk80$(SUFLIB) ;
    TKTABLE_LIB ?= libtkTable$(SUFLIB) ;
}
else
{
    TCL_LIBRARY ?= tcl80$(SUFLIB) ;
    TK_LIBRARY  ?= tk80$(SUFLIB) ;
    TKTABLE_LIB ?= tkTable$(SUFLIB) ;
}

#  The tcl and tk library files
TK_LIBS =
  $(TK_LIB_DIR)$(SLASH)$(TK_LIBRARY)
  $(TCL_LIB_DIR)$(SLASH)$(TCL_LIBRARY)
  ;

TKTABLE_LIB = $(TKTABLE_LIB_DIR)$(SLASH)$(TKTABLE_LIB) ;

#  Location of the tcl.h and tk.h header files
TK_HDRS     = $(TK_DIR)$(SLASH)include ;

# Uncomment to copy Tcl/Tk dynamic libraries to install bin directory
INSTALL_TCLTK_LIBS = 1 ;

# TclTk dynamic libraries to install to bin directory
TCL_LIBS_TO_INSTALL = tcl80 tclpip80 Tcl1680 Cw3215mt ;
TK_LIBS_TO_INSTALL  = tk80 ;

