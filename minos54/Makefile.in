#		ASCEND MINOS 5.4 Makefile
#		Ben Allan
#		March 28, 1994
#               $Date: 1997/02/07 18:23:53 $
#		$Revision: 1.3 $
#		$Author: mthomas $
#		$Source: /afs/cs.cmu.edu/project/ascend/Repository/minos54/Makefile.in,v $
#

#  If you do not have minos 5.4, this file is irrelevant
#  to installing ASCEND
#


SHELL = /bin/sh
@SET_MAKE@
builddir = ../ascend4
srcdir = @srcdir@
VPATH = @srcdir@

INCMAKE = $(builddir)/ConfigAscend
include $(INCMAKE)

MINOS_SRCS = 	           miascend.f mi10unix.f            mi20amat.f \
		mi25bfac.f mi30spec.f mi35inpt.f mi40bfil.f mi50lp.f   \
		mi60srch.f mi65rmod.f mi70nobj.f mi80ncon.f
MINOS_BINS = 	           miascend.o mi10unix.o            mi20amat.o \
		mi25bfac.o mi30spec.o mi35inpt.o mi40bfil.o mi50lp.o   \
		mi60srch.o mi65rmod.o mi70nobj.o mi80ncon.o

# sources not to be distributed
NOCOPY= mi00main.f mi05funs.f mi10unix.f mi15blas.f mi20amat.f \
	mi25bfac.f mi30spec.f mi35inpt.f mi40bfil.f mi50lp.f   \
	mi60srch.f mi65rmod.f mi70nobj.f mi80ncon.f minosl.f \
	m1minos.doc fortnames makefile.orig unix.doc readme. mi30spec.f.orig

NOMINOS_SRCS = nominos.f
NOMINOS_BINS = nominos.o



#  Uncomment the following only if you want to do something specific
#  to this directory that should override the ConfigAscend file
#
#CC = 
#CFLAGS = 
#
#  Uncomment the above only to override the ConfigAscend file


#  Customize the following if required
INCLUDES = $(ASCINC)
DEPEND_INCLUDES = 
DEFINES = $(GLOBAL_DEFS) $(MOD_ASCMALLOC)
ALL_CFLAGS = $(INCLUDES) $(DEFINES) $(CFLAGS)
ALL_CPPFLAGS = $(INCLUDES) $(DEFINES)
DEPEND_FLAGS = $(INCLUDES) $(DEFINES)
LDFLAGS = 
SYSLIBS = 


.SUFFIXES:
.SUFFIXES: .c .i .o .f
.c.o:
	$(CC) $(ALL_CFLAGS) -c $<
.c.i:
	$(CPP) $(ALL_CPPFLAGS) $< > $@
.f.o:
	$(F77) $(F77FLAGS) -c $<



all: libminos54.a

libminos54.a: $(MINOS_BINS) 
	$(RM) libminos54.a
	$(AR) cr libminos54.a $(MINOS_BINS)
	$(RANLIB) libminos54.a

nominos: $(NOMINOS_BINS)
	$(RM) libminos54.a
	$(AR) cr libminos54.a $(NOMINOS_BINS)
	$(RANLIB) libminos54.a



install: install-binaries install-libraries

install-binaries: $(LIB_DIR)
	$(INSTALL_DATA) $(ARCHIVE)/libminos54.a $(LIB_DIR)/libminos54.a
	$(RANLIB) $(LIB_DIR)/libminos54.a

install-libraries:
# this would install include files if we were installing them

$(LIB_DIR):
	mkdir $(LIB_DIR)

uninstall: uninstall-binaries

uninstall-binaries:
	$(RM) $(LIB_DIR)/libminos54.a



save-makes:
	cp Makefile Makefile.SAVED

clean mostlyclean:
	$(RM) libminos54.a *.o *.i core a.out

reallyclean: clean
	$(RM) *~ \#* *.bak TAGS

distclean: reallyclean
	$(RM) Makefile config.status

unlicensed:
	$(RM) $(NOCOPY)
	$(RM) -r misc test



nodepend: $(MINOS_SRCS)
	$(DEPEND_RM) $(DEPEND_FLAGS) $(DEPEND_INCLUDES) $?

depend: $(MINOS_SRCS)
	$(DEPEND) $(DEPEND_FLAGS) $(DEPEND_INCLUDES) $?

# DO NOT DELETE THIS LINE -- g++dep uses it.
# DO NOT PUT ANYTHING AFTER THIS LINE, IT WILL GO AWAY.


# IF YOU PUT ANYTHING HERE IT WILL GO AWAY
